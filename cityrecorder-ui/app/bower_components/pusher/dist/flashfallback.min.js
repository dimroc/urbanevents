/*!
 * Pusher JavaScript Library v2.2.4
 * http://pusherapp.com/
 *
 * Copyright 2011, Pusher
 * Released under the MIT licence.
 */
/*
 * This library contains code with the following licences:
 *
 * web_socket.js:
 *
 *   Copyright: Hiroshi Ichikawa <http://gimite.net/en/>
 *   License: New BSD License
 *   Reference: http://dev.w3.org/html5/websockets/
 *   Reference: http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol
 *
 * swfobject.js:
 *
 *   SWFObject v2.2 <http://code.google.com/p/swfobject/>
 *   is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 *
 * FABridge.js:
 *
 *   Copyright 2006 Adobe Systems Incorporated
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"),
 *   to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,
 *   and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 */

var swfobject=function(){function n(){if(!y){try{var b=e.getElementsByTagName("body")[0].appendChild(e.createElement("span"));b.parentNode.removeChild(b)}catch(f){return}y=!0;for(var b=D.length,h=0;h<b;h++)D[h]()}}function a(b){y?b():D[D.length]=b}function c(b){if(typeof r.addEventListener!=m)r.addEventListener("load",b,!1);else if(typeof e.addEventListener!=m)e.addEventListener("load",b,!1);else if(typeof r.attachEvent!=m)W(r,"onload",b);else if("function"==typeof r.onload){var f=r.onload;r.onload=
function(){f();b()}}else r.onload=b}function k(){var b=e.getElementsByTagName("body")[0],f=e.createElement(w);f.setAttribute("type",E);var h=b.appendChild(f);if(h){var a=0;(function(){if(typeof h.GetVariable!=m){var g=h.GetVariable("$version");g&&(g=g.split(" ")[1].split(","),d.pv=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)])}else if(10>a){a++;setTimeout(arguments.callee,10);return}b.removeChild(f);h=null;J()})()}else J()}function J(){var b=u.length;if(0<b)for(var f=0;f<b;f++){var h=u[f].id,
a=u[f].callbackFn,g={success:!1,id:h};if(0<d.pv[0]){var e=s(h);if(e)if(F(u[f].swfVersion)&&!(d.wk&&312>d.wk))z(h,!0),a&&(g.success=!0,g.ref=B(h),a(g));else if(u[f].expressInstall&&v()){g={};g.data=u[f].expressInstall;g.width=e.getAttribute("width")||"0";g.height=e.getAttribute("height")||"0";e.getAttribute("class")&&(g.styleclass=e.getAttribute("class"));e.getAttribute("align")&&(g.align=e.getAttribute("align"));for(var c={},e=e.getElementsByTagName("param"),k=e.length,q=0;q<k;q++)"movie"!=e[q].getAttribute("name").toLowerCase()&&
(c[e[q].getAttribute("name")]=e[q].getAttribute("value"));K(g,c,h,a)}else X(e),a&&a(g)}else if(z(h,!0),a){if((h=B(h))&&typeof h.SetVariable!=m)g.success=!0,g.ref=h;a(g)}}}function B(b){var f=null;if((b=s(b))&&"OBJECT"==b.nodeName)typeof b.SetVariable!=m?f=b:(b=b.getElementsByTagName(w)[0])&&(f=b);return f}function v(){return!G&&F("6.0.65")&&(d.win||d.mac)&&!(d.wk&&312>d.wk)}function K(b,f,a,p){G=!0;L=p||null;P={success:!1,id:a};var g=s(a);if(g){"OBJECT"==g.nodeName?(C=M(g),H=null):(C=g,H=a);b.id=
Q;if(typeof b.width==m||!/%$/.test(b.width)&&310>parseInt(b.width,10))b.width="310";if(typeof b.height==m||!/%$/.test(b.height)&&137>parseInt(b.height,10))b.height="137";e.title=e.title.slice(0,47)+" - Flash Player Installation";p=d.ie&&d.win?"ActiveX":"PlugIn";p="MMredirectURL="+r.location.toString().replace(/&/g,"%26")+"&MMplayerType="+p+"&MMdoctitle="+e.title;f.flashvars=typeof f.flashvars!=m?f.flashvars+("&"+p):p;d.ie&&(d.win&&4!=g.readyState)&&(p=e.createElement("div"),a+="SWFObjectNew",p.setAttribute("id",
a),g.parentNode.insertBefore(p,g),g.style.display="none",function(){4==g.readyState?g.parentNode.removeChild(g):setTimeout(arguments.callee,10)}());N(b,f,a)}}function X(b){if(d.ie&&d.win&&4!=b.readyState){var f=e.createElement("div");b.parentNode.insertBefore(f,b);f.parentNode.replaceChild(M(b),f);b.style.display="none";(function(){4==b.readyState?b.parentNode.removeChild(b):setTimeout(arguments.callee,10)})()}else b.parentNode.replaceChild(M(b),b)}function M(b){var f=e.createElement("div");if(d.win&&
d.ie)f.innerHTML=b.innerHTML;else if(b=b.getElementsByTagName(w)[0])if(b=b.childNodes)for(var a=b.length,p=0;p<a;p++)!(1==b[p].nodeType&&"PARAM"==b[p].nodeName)&&8!=b[p].nodeType&&f.appendChild(b[p].cloneNode(!0));return f}function N(b,f,a){var p,g=s(a);if(d.wk&&312>d.wk)return p;if(g)if(typeof b.id==m&&(b.id=a),d.ie&&d.win){var c="",l;for(l in b)b[l]!=Object.prototype[l]&&("data"==l.toLowerCase()?f.movie=b[l]:"styleclass"==l.toLowerCase()?c+=' class="'+b[l]+'"':"classid"!=l.toLowerCase()&&(c+=" "+
l+'="'+b[l]+'"'));l="";for(var k in f)f[k]!=Object.prototype[k]&&(l+='<param name="'+k+'" value="'+f[k]+'" />');g.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+c+">"+l+"</object>";I[I.length]=b.id;p=s(b.id)}else{k=e.createElement(w);k.setAttribute("type",E);for(var q in b)b[q]!=Object.prototype[q]&&("styleclass"==q.toLowerCase()?k.setAttribute("class",b[q]):"classid"!=q.toLowerCase()&&k.setAttribute(q,b[q]));for(c in f)f[c]!=Object.prototype[c]&&"movie"!=c.toLowerCase()&&
(b=k,l=c,q=f[c],a=e.createElement("param"),a.setAttribute("name",l),a.setAttribute("value",q),b.appendChild(a));g.parentNode.replaceChild(k,g);p=k}return p}function R(b){var f=s(b);f&&"OBJECT"==f.nodeName&&(d.ie&&d.win?(f.style.display="none",function(){if(4==f.readyState){var a=s(b);if(a){for(var e in a)"function"==typeof a[e]&&(a[e]=null);a.parentNode.removeChild(a)}}else setTimeout(arguments.callee,10)}()):f.parentNode.removeChild(f))}function s(b){var a=null;try{a=e.getElementById(b)}catch(h){}return a}
function W(b,a,h){b.attachEvent(a,h);A[A.length]=[b,a,h]}function F(b){var a=d.pv;b=b.split(".");b[0]=parseInt(b[0],10);b[1]=parseInt(b[1],10)||0;b[2]=parseInt(b[2],10)||0;return a[0]>b[0]||a[0]==b[0]&&a[1]>b[1]||a[0]==b[0]&&a[1]==b[1]&&a[2]>=b[2]?!0:!1}function S(b,a,h,c){if(!d.ie||!d.mac){var g=e.getElementsByTagName("head")[0];if(g){h=h&&"string"==typeof h?h:"screen";c&&(O=t=null);if(!t||O!=h)c=e.createElement("style"),c.setAttribute("type","text/css"),c.setAttribute("media",h),t=g.appendChild(c),
d.ie&&(d.win&&typeof e.styleSheets!=m&&0<e.styleSheets.length)&&(t=e.styleSheets[e.styleSheets.length-1]),O=h;d.ie&&d.win?t&&typeof t.addRule==w&&t.addRule(b,a):t&&typeof e.createTextNode!=m&&t.appendChild(e.createTextNode(b+" {"+a+"}"))}}}function z(b,a){if(T){var h=a?"visible":"hidden";y&&s(b)?s(b).style.visibility=h:S("#"+b,"visibility:"+h)}}function U(b){return null!=/[\\\"<>\.;]/.exec(b)&&typeof encodeURIComponent!=m?encodeURIComponent(b):b}var m="undefined",w="object",E="application/x-shockwave-flash",
Q="SWFObjectExprInst",r=window,e=document,x=navigator,V=!1,D=[function(){V?k():J()}],u=[],I=[],A=[],C,H,L,P,y=!1,G=!1,t,O,T=!0,d=function(){var b=typeof e.getElementById!=m&&typeof e.getElementsByTagName!=m&&typeof e.createElement!=m,a=x.userAgent.toLowerCase(),h=x.platform.toLowerCase(),c=h?/win/.test(h):/win/.test(a),h=h?/mac/.test(h):/mac/.test(a),a=/webkit/.test(a)?parseFloat(a.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!+"\v1",d=[0,0,0],l=null;if(typeof x.plugins!=m&&typeof x.plugins["Shockwave Flash"]==
w){if((l=x.plugins["Shockwave Flash"].description)&&!(typeof x.mimeTypes!=m&&x.mimeTypes[E]&&!x.mimeTypes[E].enabledPlugin))V=!0,g=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),d[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),d[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),d[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof r.ActiveXObject!=m)try{var k=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(k&&(l=k.GetVariable("$version")))g=!0,l=l.split(" ")[1].split(","),
d=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]}catch(q){}return{w3:b,pv:d,wk:a,ie:g,win:c,mac:h}}();(function(){d.w3&&((typeof e.readyState!=m&&"complete"==e.readyState||typeof e.readyState==m&&(e.getElementsByTagName("body")[0]||e.body))&&n(),y||(typeof e.addEventListener!=m&&e.addEventListener("DOMContentLoaded",n,!1),d.ie&&d.win&&(e.attachEvent("onreadystatechange",function(){"complete"==e.readyState&&(e.detachEvent("onreadystatechange",arguments.callee),n())}),r==top&&function(){if(!y){try{e.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,
0);return}n()}}()),d.wk&&function(){y||(/loaded|complete/.test(e.readyState)?n():setTimeout(arguments.callee,0))}(),c(n)))})();(function(){d.ie&&d.win&&window.attachEvent("onunload",function(){for(var b=A.length,a=0;a<b;a++)A[a][0].detachEvent(A[a][1],A[a][2]);b=I.length;for(a=0;a<b;a++)R(I[a]);for(var c in d)d[c]=null;d=null;for(var e in swfobject)swfobject[e]=null;swfobject=null})})();return{registerObject:function(a,f,c,e){if(d.w3&&a&&f){var g={};g.id=a;g.swfVersion=f;g.expressInstall=c;g.callbackFn=
e;u[u.length]=g;z(a,!1)}else e&&e({success:!1,id:a})},getObjectById:function(a){if(d.w3)return B(a)},embedSWF:function(b,f,c,e,g,k,l,n,q,r){var s={success:!1,id:f};d.w3&&!(d.wk&&312>d.wk)&&b&&f&&c&&e&&g?(z(f,!1),a(function(){c+="";e+="";var a={};if(q&&typeof q===w)for(var d in q)a[d]=q[d];a.data=b;a.width=c;a.height=e;d={};if(n&&typeof n===w)for(var t in n)d[t]=n[t];if(l&&typeof l===w)for(var u in l)d.flashvars=typeof d.flashvars!=m?d.flashvars+("&"+u+"="+l[u]):u+"="+l[u];if(F(g))t=N(a,d,f),a.id==
f&&z(f,!0),s.success=!0,s.ref=t;else{if(k&&v()){a.data=k;K(a,d,f,r);return}z(f,!0)}r&&r(s)})):r&&r(s)},switchOffAutoHideShow:function(){T=!1},ua:d,getFlashPlayerVersion:function(){return{major:d.pv[0],minor:d.pv[1],release:d.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(a,f,c){if(d.w3)return N(a,f,c)},showExpressInstall:function(a,f,c,e){d.w3&&v()&&K(a,f,c,e)},removeSWF:function(a){d.w3&&R(a)},createCSS:function(a,f,c,e){d.w3&&S(a,f,c,e)},addDomLoadEvent:a,addLoadEvent:c,getQueryParamValue:function(a){var c=
e.location.search||e.location.hash;if(c){/\?/.test(c)&&(c=c.split("?")[1]);if(null==a)return U(c);for(var c=c.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return U(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(G){var a=s(Q);a&&C&&(a.parentNode.replaceChild(C,a),H&&(z(H,!0),d.ie&&d.win&&(C.style.display="block")),L&&L(P));G=!1}}}}();
(function(){var n;n=window.WEB_SOCKET_LOGGER?WEB_SOCKET_LOGGER:window.console&&window.console.log&&window.console.error?window.console:{log:function(){},error:function(){}};10>swfobject.getFlashPlayerVersion().major||("file:"==location.protocol&&n.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),window.FlashWebSocket=function(a,c,k,n,B){var v=this;v.__id=FlashWebSocket.__nextId++;FlashWebSocket.__instances[v.__id]=
v;v.readyState=FlashWebSocket.CONNECTING;v.bufferedAmount=0;v.__events={};c?"string"==typeof c&&(c=[c]):c=[];v.__createTask=setTimeout(function(){FlashWebSocket.__addTask(function(){v.__createTask=null;FlashWebSocket.__flash.create(v.__id,a,c,k||null,n||0,B||null)})},0)},FlashWebSocket.prototype.send=function(a){if(this.readyState==FlashWebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";a=FlashWebSocket.__flash.send(this.__id,encodeURIComponent(a));if(0>
a)return!0;this.bufferedAmount+=a;return!1},FlashWebSocket.prototype.close=function(){this.__createTask?(clearTimeout(this.__createTask),this.__createTask=null,this.readyState=FlashWebSocket.CLOSED):this.readyState==FlashWebSocket.CLOSED||this.readyState==FlashWebSocket.CLOSING||(this.readyState=FlashWebSocket.CLOSING,FlashWebSocket.__flash.close(this.__id))},FlashWebSocket.prototype.addEventListener=function(a,c,k){a in this.__events||(this.__events[a]=[]);this.__events[a].push(c)},FlashWebSocket.prototype.removeEventListener=
function(a,c,k){if(a in this.__events){a=this.__events[a];for(k=a.length-1;0<=k;--k)if(a[k]===c){a.splice(k,1);break}}},FlashWebSocket.prototype.dispatchEvent=function(a){for(var c=this.__events[a.type]||[],k=0;k<c.length;++k)c[k](a);(c=this["on"+a.type])&&c.apply(this,[a])},FlashWebSocket.prototype.__handleEvent=function(a){"readyState"in a&&(this.readyState=a.readyState);"protocol"in a&&(this.protocol=a.protocol);var c;if("open"==a.type||"error"==a.type)c=this.__createSimpleEvent(a.type);else if("close"==
a.type)c=this.__createSimpleEvent("close"),c.wasClean=a.wasClean?!0:!1,c.code=a.code,c.reason=a.reason;else if("message"==a.type)a=decodeURIComponent(a.message),c=this.__createMessageEvent("message",a);else throw"unknown event type: "+a.type;this.dispatchEvent(c)},FlashWebSocket.prototype.__createSimpleEvent=function(a){if(document.createEvent&&window.Event){var c=document.createEvent("Event");c.initEvent(a,!1,!1);return c}return{type:a,bubbles:!1,cancelable:!1}},FlashWebSocket.prototype.__createMessageEvent=
function(a,c){if(document.createEvent&&window.MessageEvent&&!window.opera){var k=document.createEvent("MessageEvent");k.initMessageEvent("message",!1,!1,c,null,null,window,null);return k}return{type:a,data:c,bubbles:!1,cancelable:!1}},FlashWebSocket.CONNECTING=0,FlashWebSocket.OPEN=1,FlashWebSocket.CLOSING=2,FlashWebSocket.CLOSED=3,FlashWebSocket.__isFlashImplementation=!0,FlashWebSocket.__initialized=!1,FlashWebSocket.__flash=null,FlashWebSocket.__instances={},FlashWebSocket.__tasks=[],FlashWebSocket.__nextId=
0,FlashWebSocket.loadFlashPolicyFile=function(a){FlashWebSocket.__addTask(function(){FlashWebSocket.__flash.loadManualPolicyFile(a)})},FlashWebSocket.__initialize=function(){if(!FlashWebSocket.__initialized)if(FlashWebSocket.__initialized=!0,FlashWebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=FlashWebSocket.__swfLocation),window.WEB_SOCKET_SWF_LOCATION){if(!window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR&&!WEB_SOCKET_SWF_LOCATION.match(/(^|\/)WebSocketMainInsecure\.swf(\?.*)?$/)&&WEB_SOCKET_SWF_LOCATION.match(/^\w+:\/\/([^\/]+)/)){var a=
RegExp.$1;location.host!=a&&n.error("[WebSocket] You must host HTML and WebSocketMain.swf in the same host ('"+location.host+"' != '"+a+"'). See also 'How to host HTML file and SWF file in different domains' section in README.md. If you use WebSocketMainInsecure.swf, you can suppress this message by WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR = true;")}a=document.createElement("div");a.id="webSocketContainer";a.style.position="absolute";FlashWebSocket.__isFlashLite()?(a.style.left="0px",a.style.top=
"0px"):(a.style.left="-100px",a.style.top="-100px");var c=document.createElement("div");c.id="webSocketFlash";a.appendChild(c);document.body.appendChild(a);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(a){a.success||n.error("[WebSocket] swfobject.embedSWF failed")})}else n.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")},FlashWebSocket.__onFlashInitialized=
function(){setTimeout(function(){FlashWebSocket.__flash=document.getElementById("webSocketFlash");FlashWebSocket.__flash.setCallerUrl(location.href);FlashWebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var a=0;a<FlashWebSocket.__tasks.length;++a)FlashWebSocket.__tasks[a]();FlashWebSocket.__tasks=[]},0)},FlashWebSocket.__onFlashEvent=function(){setTimeout(function(){try{for(var a=FlashWebSocket.__flash.receiveEvents(),c=0;c<a.length;++c)FlashWebSocket.__instances[a[c].webSocketId].__handleEvent(a[c])}catch(k){n.error(k)}},
0);return!0},FlashWebSocket.__log=function(a){n.log(decodeURIComponent(a))},FlashWebSocket.__error=function(a){n.error(decodeURIComponent(a))},FlashWebSocket.__addTask=function(a){FlashWebSocket.__flash?a():FlashWebSocket.__tasks.push(a)},FlashWebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var a=window.navigator.mimeTypes["application/x-shockwave-flash"];return!a||!a.enabledPlugin||!a.enabledPlugin.filename?!1:a.enabledPlugin.filename.match(/flashlite/i)?
!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||swfobject.addDomLoadEvent(function(){FlashWebSocket.__initialize()}))})();
